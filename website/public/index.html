<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
    :root {
        /* Primary theme color */
        --primary-color: rgba(143, 244, 254, 0.4);
        /* Primary theme text color */
        --primary-text-color: #543631;
        /* Primary theme link color */
        --primary-link-color: #078Bc9;
        /* Secondary color: the background body color */
        --secondary-color: #fcfaf6;
        --secondary-text-color: #303030;
        /* Highlight text color of table of content */
        --toc-highlight-text-color: #d46e13;
    }
</style>
    <link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:400,500,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/normalize.css">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;stitcherd.vhodges.dev&#x2F;juice.css">
    
    
</head>

<body>
    

    <header class="pos-absolute" style="background-color: transparent">
        

<a href="https:&#x2F;&#x2F;stitcherd.vhodges.dev&#x2F;">
    <div class="logo">
        Stitcherd
    </div>
</a>

<nav>
    
      
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;stitcherd.vhodges.dev&#x2F;news&#x2F;">News</a>
      
    
      
    
    
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;lists.sr.ht&#x2F;~vhodges&#x2F;stitcherd-general&#x2F;">Mailing List</a>
        
        <a class="nav-item subtitle-text" href="https:&#x2F;&#x2F;github.com&#x2F;vhodges&#x2F;stitcherd">Github</a>
        
    
</nav>

    </header>

    <div class="hero">
        
<script async defer src="https://buttons.github.io/buttons.js"></script>
<section class="text-center">
    <h1 class="heading-text" style="font-size: 40px;border:none;">
        Dynamic content for <em>mostly</em> static sites
    </h1>
    <h3 class="title-text" style="text-align:left;font-size:18px;border:none;">
        Stitcherd can automatically modify the element tree of a page before serving it to users. You can tell it where to insert new content using CSS selectors. <br><br>For example, if you want to be evil, inject a huge animated banner just before the &lt;main&gt; element of every page you serve.
    </h3>
    <div>
        <a class="github-button" href="https://github.com/vhodges/stitcherd" data-size="large" data-show-count="true"
           aria-label="Star vhodges/stitcherd on GitHub">Star</a>
        <a class="github-button" href="https://github.com/vhodges/stitcherd/fork" data-size="large"
           data-show-count="true" aria-label="Fork vhodges/stitcherd on GitHub">Fork</a>
    </div>
</section>
<img class="hero-image" style="width: 50%" src="https:&#x2F;&#x2F;stitcherd.vhodges.dev&#x2F;pixeltrue-icons-building-website.svg">

<div class="explore-more text"
    onclick="document.getElementById('features').scrollIntoView({behavior: 'smooth'})">
    Explore More ⇩
</div>
<style>
    .hero section {
        padding: 0 5rem;
    }
    @media screen and (max-width: 768px) {
        .hero section {
            padding: 0 2rem;
        }

        .hero-image {
            display: none
        }
    }
</style>
    </div>

    </div>

    

    <main>
        <div class="content text">
            
            <div id="features" class="heading-text">Overview</div>
            <div id="homepage">
<p>Static sites are great. They're fast to serve, there's less to to go wrong and are hostable 
pretty much anywhere and any how you would like to.  But sometimes,  just sometimes there is
some page or some part of every page that has dynamic or even personalized content on it. 
Stitcherd is for those times.</p>
<p>It is a web server that reads some source content (typically a local static file, but could come from a remote source), fetches one or more pieces of remote “dynamic” content and injects them into the source document using a css selector to find the insertion point. These can be nested. The remote dynamic content can be remote html or output of a Go template that can also process remote html and/or remote json data.</p>
<p>The resulting content is then served to the client. You can have multiple routes with different sets of content to be replaced (and indeed source document). In other words it does server side includes, but with css/dom manipulation and so doesn’t require special directives in the source documents.</p>
<p>A couple of Use cases:</p>
<ul>
<li>Fast e-commerce site with static product pages, but dynamic pricing/availability/promotions. Plus server side carts</li>
<li>Commenting system for static blogs. JS Free</li>
<li>Micro services/frontends</li>
</ul>
<p>Yes, it’s server that has to be hosted somewhere and you need to decide if that’s okay for your use case or not, but then so are most of the alternatives, except JS of course, but same-origin, et al leads it to be harder (imo) to use than this. </p>
<h2 id="features">Features</h2>
<h3 id="current">Current</h3>
<ul>
<li>Multiple vhosts</li>
<li>CSS Selector page assembly</li>
<li>Static Content catch all (but... will allow proxy fallback soon)</li>
<li>Simple cache controls per endpoint/route (more types coming soon - ie etag, last modified etc.)</li>
<li>Go templates (with HTML and JSON Data retrieval) for endpoints</li>
</ul>
<h3 id="coming-soon">Coming Soon</h3>
<ul>
<li>Bot detection (&gt;800 known bots)</li>
<li>Both General and (Bot == true) rate limiting (Site wide and per route)</li>
<li>(Optional) Sessions </li>
<li>Proxy for fallback (eg / to some CMS) and for routes (eg /blog/ proxied to Wordpress)</li>
<li>Static content routes</li>
<li>Site Authentication (OAUTH/SAML end point config, basic auth?  Builtin user/password (agencies?)). Authenticate routes?</li>
<li>HMAC auth support for backend ends</li>
<li>More control over endpoint request (ACTION/Verb, protocol, headers, cookies, form vars, etc )</li>
</ul>
<h1 id="building">Building</h1>
<p>Requires Go &gt; 1.12 </p>
<p>Clone the repo and then a simple </p>
<pre><code>go build 
</code></pre>
<p>Docker image at some point</p>
<h1 id="examples">Examples</h1>
<p>There is a 'demo' folder that serves as an example/testbed</p>
<pre><code>./stitcherd --host demo/site.hcl
http://localhost:3000/
</code></pre>
<p>The home page at https://stitcherd.vhodges.dev/ will also serve as an example (soon).</p>
<ul>
<li>It pulls the index page content from the Github README.md (ie this file)</li>
<li>It pulls a list of recent posts to the Announcment mailing list from sourcehut</li>
<li>Source (and generated static site - via zola - are checked into source control under website)</li>
</ul>
<h1 id="prior-art-and-inspiration">Prior Art and Inspiration</h1>
<ul>
<li>Edge side includes (ESI) using Varnish https://varnish-cache.org/</li>
<li>shtml files and virtual paths in nginx</li>
<li>Greasemonkey: https://addons.mozilla.org/en-CA/firefox/addon/greasemonkey/ (Client side)</li>
<li>Mousehole: https://github.com/whymirror/mousehole</li>
<li>Jigsaw: https://www.w3.org/Jigsaw/Overview.html (I vaguely recall it could do some of this kind of thing - I could be wrong though)</li>
<li>Netlify: most recently has the same idea with their Edge (Handlers) https://www.netlify.com/products/edge/edge-handlers/</li>
<li>Soupault: Is the main inspiration for how stitcherd works. https://soupault.neocities.org/ </li>
</ul>
<h1 id="license">License</h1>
<p>Apache 2.0</p>
</div>

            
        </div>

    </main>

    
<footer>
    <small class="subtext">
        <a href="https://vhodges.dev">Vince Hodges</a> © 2020
    </small>
</footer>

</body>
</html>